# 10.数据模型的模式

尽管存在各种各样的业务领域，每个领域都绘制出独特的数据模型，但在形式上它们其实是相似的。

![数据模型的模式](https://github.com/RNCloudService/higher-process/blob/main/pic/17.jpg)



###### “父子关系”的模式

两个实体间的关系可以被分类为“父子关系”，“引用关系”，和“派生关系”。无论模型有多复杂，都可以通过这些组合进行描述

![父子关系模式](https://github.com/RNCloudService/higher-process/blob/main/pic/18.jpg)

E1的标识符包含在E2的标识符中。对于E1来说，E2是它的“子”，对于E2来说，E1是它的“父”。

在父子关系中，每一条父记录可能对应多条子记录，但每一条子记录只能对应一条父记录。连接两个实体的线上的符号象征性地表示了这种多重性。将实际记录值（实例）并入模型可以更清晰地理解这种多重性。

观察模型和实例可以帮助理解标识符的重要属性。无论实体中存储了多少行记录，标识符的值（如果是复合键，则是标识符的组合）在其中都不会重复。这被称为标识符的“唯一性”，它是与“不取空值（零或空白）”和“在记录被添加和删除之间值不变”等属性并列的主要标识符属性



![父子关系举例1](https://github.com/RNCloudService/higher-process/blob/main/pic/19.jpg)

![父子关系举例2](https://github.com/RNCloudService/higher-process/blob/main/pic/20.jpg)



###### 参照关系

"一个实体的标识符被包含在另一个实体中，但并不构成其标识符的一部分"的关系

![参照关系](https://github.com/RNCloudService/higher-process/blob/main/pic/21.jpg)

![参照关系举例](https://github.com/RNCloudService/higher-process/blob/main/pic/22.jpg)



###### "派生关系"模式

当两个实体具有相同的标识符时，它们被认为处于"同一关系"或"派生关系（泛化/特化关系）"中。然而，"同一关系"是不正常的关系，而"派生关系"是正常的。

![派生关系](https://github.com/RNCloudService/higher-process/blob/main/pic/23.jpg)



###### 按照"业务流程的四个阶段"来安排的模式

理解按照"业务流程的四个阶段"来安排的模式对于理解成语是非常方便的。特别是当"需求"，"工作指示"和"工作实绩"的信息形成独立的整体时，可以很好地适用。基于一次请求，会记录一份"请求概览"和与之相关的多份"请求明细"。因为这些"请求明细"中混杂着各种各样的请求，所以将具有相同工作条件的行整合为易于操作的组，这就是"工作指示"的整体。最终，工作的结果，即"工作实绩"，会记录在各个"工作指示明细"之上。这里，"工作指示明细"兼具"工作实绩"的形式，但在某些情况下，"工作实绩"可能作为"工作指示明细"的子表存在。

![业务流程](https://github.com/RNCloudService/higher-process/blob/main/pic/24.jpg)



"需求-工作指示-工作成果"有时可能会被设计成以下的形式。这种模式称为"频繁出现的父子类型"，它的特点是把管理对象一一划分为"父子"关系，并试图通过外键将它们连接起来，这种模式看起来并没有多大创意。虽然表面上看起来并没有什么错误，但它无法适应不同"需求编号"的[需求明细]被束入同一工作指示的这种立体处理模式，它看起来非常"平面化"。这种模式会使数据库复杂化，为了控制各个对应关系，编程也会变得复杂，所以这是一个应该避免的模式。



###### "'親子頻発型'的反模式"

![反模式](https://github.com/RNCloudService/higher-process/blob/main/pic/25.jpg)



###### 业务流程的四个阶段中的“实际结果的汇总和分析”中出现的“汇总数据库”的建模模式

![汇总数据库](https://github.com/RNCloudService/higher-process/blob/main/pic/26.jpg)



