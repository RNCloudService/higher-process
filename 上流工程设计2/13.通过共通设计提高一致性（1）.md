# 13.通过共通设计提高一致性（1）

在每个设计元素的设计中，通过预先确定某些项目可以提高设计的一致性和效率。这种汇总这些项目的工作，称为共通设计。

代表性的共通设计包括"界面共通"、"报表共通"、"批处理共通"、"数据库共通"和"消息共通"



###### 1.关于"界面共通"

界面共通是在进行界面设计时，汇总的共通的“规则”。通过创建此类界面共通，可以防止在界面设计中出现各种各样的设计，导致系统缺乏统一性和难以使用。这里描述的界面共通包括了相对细微的内容。在使用时，根据需要进行选择。这些元素并不是必需的。此外，根据平台的不同，项目和内容也会有所不同。

在考虑界面共通时，首先需要确认的是目标界面的运行环境。需要整理该环境的操作系统、运行环境（对于Web应用来说，就是浏览器）等。

###### i) 操作系统（OS）

需要了解并描述客户端运行的操作系统的多种版本。对于Web系统，由于客户端浏览器的版本、浏览器使用的库的版本等可能会有所不同，因此需要进行确认并进行描述。对于丰富的客户端来说，这一点更为重要。操作系统的更新等可能会导致库的修订版本发生变化，这可能会影响客户端的操作，因此需要进行确认和描述。这些信息也将用于测试时的环境定义。



###### ii）浏览器和操作环境

在Web系统中，因为客户端就是浏览器，所以应描述所支持的浏览器类型和版本。对于富客户端，应描述其运行所需的环境类型和版本。

同样地，应描述OS、浏览器、应用程序的前提条件等信息。这些信息将用于考虑CSS和JavaScript的差异，并确定进行浏览器兼容性处理的库以及其他界面处理库的结构。

此外，结合i）中的操作系统（OS），这些信息也可以用作确定测试环境的输入。由于这些环境的操作可能因操作系统而异，因此可以使用如下的OS和浏览器矩阵来定义：在此矩阵的单元格中，可以用O（支持）或-（不支持）等符号来定义系统是否支持。

所有这些组合都可能成为测试的对象。如果组合过多，仅界面测试就会耗费大量的人力，因此有必要考虑有意识地减少。



###### iii）屏幕的分辨率和颜色数

需要确定并描述预期客户端的屏幕分辨率。通常可能会选择笔记本电脑的最低分辨率，例如XGA（1024×768），但如果环境中存在旧的笔记本电脑，那么可能是800x600。

对于颜色数也是一样，通常不需要特别关注，但如果存在旧的电脑，可能需要限制为256色。因为这些信息会影响屏幕设计，所以需要整理并记录（这些内容可能已在需求定义中描述，那么只需要注明"参见需求定义文档"即可）。



###### iv）网络速度

需要描述客户端和服务器之间的网络线路速度。在宽带环境中可能不会有问题，但如果考虑移动环境，屏幕文件大小或JavaScript的大小可能会对响应时间产生影响。因此，作为构建屏幕方法的输入，需要描述预期网络的线路速度。



###### 2.屏幕分类

通过对屏幕进行分类，可以使屏幕设计变得更容易，因此在屏幕共通部分中描述屏幕分类是很有必要的。此类屏幕分类包括列表屏幕、详细屏幕、搜索屏幕和特殊屏幕等。整理这些内容，并定义屏幕的设计、屏幕及组件的使用方法，可以帮助构建具有一致性的系统，并提供用户友好的界面。

如果没有这样的标准，容易出现屏幕设计风格各异、界面设计不统一的问题。尤其是在参考屏幕和更新屏幕之间的关系上，应基于一致的策略进行思考。基于这种屏幕分类来统一设计，并通过屏幕组件定义和CSS来实施，从而创建模型和实际屏幕。

###### i）一览画面

这是根据特定条件搜索并以列表形式显示数据的界面。通常，它的结构如下图所示进行创建和显示。

在初始显示中，它会显示按照固定条件搜索到的列表。在这个列表显示界面上，通常允许用户输入搜索条件，并根据这些条件重新显示结果。但从设计和用户友好性的角度考虑，也可以将搜索条件设置在另一个屏幕上，或者设计成像对话框那样的结构。因此，将这些内容标准化可以避免混乱，并使设计变得更容易。

在这样的结构中，需要考虑将搜索结果的列表区域设置为仅供参考还是可以更新，并描述在搜索结果列表中使用的组件和内容。

一览参照画面： 在一览参照画面中，会定义使用不能编辑的组件（如标签、只读的文本框等）。

一览更新画面： 在一览更新画面中，会定义使用可以编辑的组件（如文本框等）。整体更新功能相对于逐个更新的功能来说难度稍高，所以需要考虑是否使用它。如果屏幕框架支持整体更新，那么这不是一个大问题。



###### ii）详细画面 

与一览画面不同，详细画面显示了单一信息的详细属性。这个画面也是根据其目的（如参照、更新等）来分类的。

·详细参照画面： 详细参照画面显示一个特定数据或与之相关的数据。对于仅参照的屏幕，它可能有一个编辑按钮，使用户可以转到更新屏幕。这种策略会在屏幕共通部分进行描述。

·详细更新画面： 详细更新画面显示单一数据或与单一数据相关的多个数据，并可以更新这些值。还有一种设计思路是在新注册画面上显示现有的值，并对需要修改的部分进行更新。这种思考方式和定义方法需要确定并进行描述。



###### iii）搜索画面

输入搜索条件的画面是一个特殊的画面，有的是一个独立的屏幕，有的则是前面提到的一览/详细画面的一部分。

在综合的画面中，初始显示是根据默认的搜索条件进行的，当输入搜索条件并搜索时，会根据匹配的内容重新显示。



###### 3.共同画面

虽然不是业务的主要目标，但有时会准备一些支持业务目的的画面。例如，用于搜索主数据的子画面等。应明确列出这些通用的画面。而不是在多个地方定义相同的画面，应在画面共用部分定义它，并使用在那里定义的画面名和ID来创建画面列表和画面转换图。



###### 4.画面布局

屏幕是由若干布局模式组成的。这些模式需要根据使用目的进行统一。这样可以创建易于使用的屏幕功能。因此，应该在屏幕共享部分描述屏幕布局的组成元素及其模式。

屏幕上的各个区域，不论功能如何，都具有以下的部分：

i）头部 

这是显示在屏幕顶部的区域。通常，这里会显示如系统标题、登录信息（员工ID、员工名、部门名）、面包屑导航、常用消息等。

i）主要部分 

这是代表屏幕功能的区域。根据功能，这里的内容、结构和布局都会有所不同。在屏幕流转图中，会描述这个部分的流转。

ⅲ）菜单部分 

这是显示系统菜单的区域。会根据后面描述的菜单结构和权限来显示菜单。

iv）脚部 

这是总是显示在屏幕底部的区域，不论屏幕功能如何。通常这里会显示版权信息、系统版本、构建号等。

v）消息区域 

决定在屏幕的易于理解的部分显示消息或错误消息的区域。由于这个区域是各个部分的一部分，所以它被命名为“区域”，而不是“部分”。



###### 5.设计共性

为了增强系统的统一性和使用感，需要将设计内容共同化，并以设计共性进行描述。确定的内容将以CSS（级联样式表）的形式实现。从设计的统一性角度考虑颜色使用的话，会涉及到Web设计的内容，超出了本文的范围，但会整理并描述显示文本的颜色、表示动作的颜色和区域的颜色等。

i）字体和大小

对于字体和大小，需要将使用该字体的显示进行模式化描述。对于Web应用，需要考虑多个平台作为客户端，所以需要决定是否有意识地指定字体家族或选择共同的字体。

ii）字体共性 

类名是指HTML的class属性（与样式表关联），在屏幕设计（布局时）中作为参考。在这个意义上，如果系统的形态不是Web系统，那么这个类名将表示一组标识符，并且需要另外考虑系统形态的实现。

ⅲ）文字的排列 

描述文字的排列方式，例如对于显示区域，有顶部对齐/垂直居中/底部对齐，左对齐/右对齐/水平居中等不同的模式。



###### 6.定义可使用的屏幕部件

屏幕由多个元素组成，通过对这些元素进行分类和通用化，可以实现部件的实现和设计等的统一。因此，作为构成屏幕的元素，将部件定义为屏幕通用并进行描述。

i）输入部件 输入方式有很多种，根据输入内容需要选择屏幕部件。在此，明确这些选择标准。由于屏幕部件可能包括格式和检查逻辑，也需要整理并描述这些内容。

ii）输出部件 这是用于显示的屏幕部件。在大多数情况下，它是标签，但考虑到图表等专用于输出的部件，因此需要在系统内部进行统一描述。

ⅲ）网格部件 这是以表格形式表示的部件。定义标题、项目名的显示方式、纵横表等，并进行描述。

iv）执行部件 操作此部件可执行功能



###### 7.错误画面策略

当发生屏幕转换错误时，需要明确显示哪种错误屏幕的策略，并描述如何在屏幕转换图中反映常见的错误。错误的种类和错误处理方式也有关系

###### i）错误消息 

在屏幕上显示的错误消息与运营有关，因此在运营设计的问题上也需要考虑消息的显示区域、错误消息的显示方式（字符、字体、颜色、长度）和错误ID，并进行描述。

ii）共同错误显示策略 

在屏幕转换图中反映共同错误屏幕是相当麻烦的。

![错误画面策略](https://github.com/RNCloudService/higher-process/blob/main/%E4%B8%8A%E6%B5%81%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A12/picture/23.jpg)



###### 8.命名和表达规则

决定并描述屏幕的命名（屏幕标题）或要显示的标签文言等的命名规则。业务术语可以直接使用在需求定义中使用的文言。确定并描述所需的显示内容，以便在设计中使用。



###### 9.策略

在屏幕显示、屏幕动作、屏幕转换等方面，有些项目最好事先确定策略，这样设计起来会更容易。整理这些项目并进行描述。

策略： 在屏幕显示、屏幕动作、屏幕转换等方面，有些项目最好事先确定策略，这样设计起来会更容易。整理这些项目并进行描述。

1. ###### 是否有异步更新 

   在非同步处理中，从屏幕执行动作并通过与服务器的通信来更改屏幕内容的操作（所谓的Ajax）是否存在需要明确。整理这种方式并进行描述。

###### i）. 更新确认屏幕的定位 

这是关于屏幕转换的策略，即执行更新操作（如点击表示更新的按钮）后如何进行屏幕转换的策略。通常可以分为以下三种分类，但如果每个处理方式都不同，系统的使用性会降低，所以需要确定一个策略，并在屏幕共通中描述，并反映在设计中。



模式1：在更新前显示确认屏幕，并显示完成屏幕。 

这种方式是在执行更新处理之前重新显示要注册的信息，让用户确认后再进行更新处理。

![模式1](https://github.com/RNCloudService/higher-process/blob/main/%E4%B8%8A%E6%B5%81%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A12/picture/24.jpg)

模式2：与完成屏幕的结合 

这种方法是在更新完成的屏幕上显示更新内容，以便用户可以清楚地看到哪些内容已经更新了。

![模式2](https://github.com/RNCloudService/higher-process/blob/main/%E4%B8%8A%E6%B5%81%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A12/picture/25.jpg)

模式3：无 

这是不设有更新确认屏幕的模式。在此模式下，如果想要确认更新内容，可以使用详细的参考屏幕。在屏幕跳转时，更新后可以调用相关的详细参考屏幕或更新信息输入屏幕。由于很难知道是否已经更新，所以可能很少有人这样做，但这种屏幕跳转方法在社交网站等上较为常用。

![模式3](https://github.com/RNCloudService/higher-process/blob/main/%E4%B8%8A%E6%B5%81%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A12/picture/26.jpg)



###### 10.字段校验规则

描述了如何检查输入到屏幕上的字段值的方针。

###### i）校验的位置

校验的位置有两处，即客户端和服务器。服务器必须始终执行校验，因此应明确在客户端进行哪些情况和内容的校验，并进行描述。

###### ii）字段检查策略 

如果考虑按照屏幕或字段来检查项目的方法或规则，可能存在有时进行检查、有时不进行检查，或检查方法不同的可能性。因此，应明确共同的检查方法或规则。尤其在后面所述的格式检查中，根据在屏幕详细描述中定义的域（分类了可能的值的组）进行检查。这样，只需在屏幕字段设计中描述是否进行检查，就等于描述了检查的内容。

###### 格式检查 

这是检查字段类型、位数等的方法。特别是要检查是否与存储目标的数据库列的域相同，或是否是预期的类型和位数。 格式检查示例（手机电话号码格式检查） 检查输入是否为“3位-4位-4位”，并检查每个位数是否为数字。如果输入的格式不同或不是数字，结果将为假。 另一方面，检查该手机电话号码是否存在（是否已注册）不是格式检查，而是逻辑检查。 

###### 值范围检查 

当输入的类型和位数正确时，检查该值是否在预期的范围内。

###### 生日检查

考虑到未成年不能使用的情况， 检查输入的YYY/MM/DD-服务器日期（业务日期）时，年龄是否低于20岁。

###### 关联检查 

当输入项目之间存在关系时，检查它们之间的一致性。 关联检查的例子 

例如，支付方式必须从信用卡、银行转账、货到付款中选择，那么就需要进行必选检查。如果选择了信用卡支付方式，那么信用卡号就是必填的，这种关系的检查就是关联检查。

###### 逻辑检查 

当输入值与其他内容有关，并且这些相关信息存储在数据库中，而且系统状态依赖于这些信息时，需要检查是否存在于数据库中。这种检查因功能而异，因此不能作为屏幕通用描述。在这里，我们只是描述这样的检查也是存在的，作为参考。

###### ⅲ）检查结果的显示方法 

如果检查是OK的，则进入下一个处理步骤；但如果检查是NG的，则需要在屏幕上显示其内容。 虽然这种检查错误的屏幕显示是由架构决定的，但可以在这里大致描述，并与消息标准一起，使屏幕设计时不会迷茫。



###### 11.部品选择规则 

明确显示部件选择的规则。例如，如果只允许选择一个选项，可以选择单选按钮或下拉选择框（组合框）。但是否选择哪个可以根据选项的元素数量来确定，这可以作为规则来描述。



###### 12.按钮的布局规则 

在布置按钮时，需要明确其布局规则。例如，注册和更新按钮位于左侧，而取消按钮位于右侧。



###### 13.项目的分割规则 

对于可以分割的项目，如地址和姓名，需要明确分割的方法和策略作为规则。例如，地址可以分为省/直辖市、市/县、街道和门牌号等。如果与邮政编码进行映射，那么省/直辖市和市/县可能会被视为一个整体（如果需要存储，根据聚合等功能可能需要进一步分割）。姓名则分为姓和名。与地址不同，后期分割姓名可能较为困难，因此需要仔细考虑。