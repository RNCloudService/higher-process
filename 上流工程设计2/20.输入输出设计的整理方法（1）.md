# 20.输入输出设计的整理方法（1）

输入输出设计是根据功能规格，设计与功能相关的输入或输出的对象、项目等。

根据功能规格，通常定义与目标系统相关的输入输出部分的接口内容。这些接口分为人类相关的和其他系统相关的。与人类相关的是屏幕和报表，与其他系统相关的是系统协作接口。



###### 1.屏幕设计～整理菜单、转换、输入输出～

屏幕设计是明确屏幕输入或输出将如何进行的内容。特别是如何输入输入项目，如何将存储的信息分配给输出项目，需要进行明确的设计。 屏幕设计中的设计元素包括“菜单”、“屏幕转换图”、“屏幕列表”和“屏幕项目设计”。



###### 2.菜单 

在屏幕设计中，一个容易开始的起点是菜单。从功能考虑屏幕转换是常规方式，但如果功能分割不顺利的话，从菜单开始可能会更容易。 用户的操作触发的功能可以分层次地整理，从而可以创建菜单。由于菜单具有层级结构，因此会使用表现层级结构的文档进行创建。

###### 菜单的项目

| 项目内容     | 说明                                                         |
| ------------ | ------------------------------------------------------------ |
| 项目名       | 描述菜单的序号                                               |
| #            | 菜单项ID，描述标识菜单项的ID                                 |
| 级别         | 描述菜单层次的级别                                           |
| 名称         | 描述菜单显示的文字                                           |
| 对应的功能ID | 描述当菜单被选择时将执行的功能的ID                           |
| 显示条件     | 如果有显示菜单的条件，则进行描述。如果显示方式不同（例如灰色）也进行描述 |
| 执行条件     | 如果有执行功能的条件，则在选择菜单时进行描述                 |

###### 表示菜单的文档示例（会员管理和订单管理的情况）

| ＃   | 菜单项ID    | 级别 | 名称         | 对应的功能ID | 显示条件     | 执行条件 |
| ---- | ----------- | ---- | ------------ | ------------ | ------------ | -------- |
| 1    | MI-01       | 1    | 会员管理     |              |              |          |
| 2    | MI-01-01    | 2    | 新会员注册   | M-01         |              |          |
| 3    | MI-01-02    | 2    | 会员信息变更 | M-02         |              |          |
| 4    | MI-01-03    | 2    | 会员删除     | M-03         |              |          |
| 5    | MI-02       | 1    | 订单管理     |              |              |          |
| 6    | MI-02-01    | 2    | 订单搜索     | 0-01         |              |          |
| 7    | MI-02-02    | 2    | 发货处理     | 0-02         | 佐川急递手续 |          |
| 8    | MI-02-02-01 | 3    | 佐川急递手续 | 0-03         |              |          |

在右侧列出管理权限的单位，即角色（各负责人的职责），并用O来总结这些菜单是否可以使用。在这个例子中，会员管理/订单管理会显示为顶级菜单，当“会员管理”菜单被点击时，“新会员注册”、“会员信息变更”、“会员删除”菜单会被显示。除权限外，没有显示条件和执行条件，因此是空白的。



###### 包含以角色管理的权限的菜单

| ＃   | 菜单项ID    | 级别 | 名称         | 对应的功能ID | 显示条件 | 执行条件 |
| ---- | ----------- | ---- | ------------ | ------------ | -------- | -------- |
| 1    | MI-01       | 1    | 会员管理     |              |          |          |
| 2    | MI-01-01    | 2    | 新会员注册   | M-01         |          |          |
| 3    | MI-01-02    | 2    | 会员信息变更 | M-02         |          |          |
| 4    | MI-01-03    | 2    | 会员删除     | M-03         |          |          |
| 5    | MI-02       | 1    | 订单管理     |              |          |          |
| 6    | MI-02-01    | 1    | 订单搜索     | 0-01         |          |          |
| 7    | MI-02-02    | 2    | 发货处理     |              |          |          |
| 8    | MI-02-02-01 | 3    | 佐川急递手续 | 0-02         |          |          |

###### 包含角色的菜单层次

需要整理为菜单项的有以下四个：

1. 菜单（项目）ID
2. 菜单被选中时执行的功能ID
3. 能够选择菜单的条件（包括权限管理） 前述的格式已经定义为可以整理这四个。

当菜单被执行（选择）时，将执行相应功能ID的功能。常见的模式是，当菜单被选中时，其他屏幕会被显示。



###### 3.屏幕转换区

从菜单或功能、用例等，创建屏幕转换图。屏幕转换图字面上描述了屏幕状态转变的情况。无论使用何种方法或绘图方式都没问题

![屏幕转换图](https://github.com/RNCloudService/higher-process/blob/main/%E4%B8%8A%E6%B5%81%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A12/picture/35.jpg)

在绘制屏幕转换图时，需要确认以下三个点：

###### i）整体与局部 

是用一幅大图描述屏幕转换图，还是用几幅图来描绘，这是创建屏幕转换图时的一个要点。这种描述的粒度取决于项目的目标领域的大小。需要能够理解整体情况的屏幕转换图，以避免“只看树木，不看森林”的情况，也需要满足ii）点的细粒度的屏幕转换图。因此，根据项目的情况来选择。有时可能需要用一张概要的图和几张详细的图来表达屏幕转换。

###### ii）细粒度的功能 

按照“屏幕通用”的屏幕转换标准进行详细化时，可以确认到等同于第4级的详细功能。

详细的屏幕转换图

![详细的屏幕转换图](https://github.com/RNCloudService/higher-process/blob/main/%E4%B8%8A%E6%B5%81%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A12/picture/36.jpg)

向商品注册屏幕画的箭头表示映射到显示商品注册屏幕的功能。而从商品注册确认屏幕出去的箭头，则映射到商品数据库注册功能。也就是说，屏幕转换图可以帮助将其分解到4级粒度。

###### iii）输入场景 

屏幕转换图的最后一点是，是否可以在确认时检查业务流程。在业务流程中，如果可以将某个活动映射为“通过选择菜单，屏幕转换并执行功能”，则可以预想输入场景。基于这个假设，可以明确输入项、输入单元和屏幕的用户，这有助于详细的屏幕设计。



###### 4.屏幕列表 

基于屏幕转换图，可以将屏幕列表整理成易于管理的概览表。这是为了在创建屏幕项目规范或屏幕程序时方便管理而创建的成果物。从另一个角度来看，它也可以作为创建在线程序的整体工时估算的依据。虽然仅仅通过查看屏幕数量和屏幕的复杂性就可能会误估工时，但它可以作为一个参考依据。

###### 屏幕列表的项目

| 项目名                 | 说明                                                         |
| ---------------------- | ------------------------------------------------------------ |
| 屏幕列表的连续号码     | 记录用于防止对同一ID的屏幕元素进行多次定义的ID。由于屏幕名称可能会有变化，因此记录ID |
| 名称                   | 记录简洁地表示屏幕的名称。如果名称中包含表示更新或引用的单词，将更容易理解。应遵循在屏幕通用中定义的命名规则 |
| 屏幕分类               | 选择并记录在屏幕通用中定义的屏幕分类                         |
| 引用·更新类型          | 引用或更新的类型。虽然可以用名称（如“注册屏幕”）表示，但是记录类型是为了通过过滤器显示列表或排序而进行的 |
| 相关的主要数据         | 记录与屏幕相关的数据名称                                     |
| 说明                   | 记录屏幕的概述                                               |
| 相关的功能ID           | 记录显示目标屏幕的功能的功能ID和外部事件的功能ID（多个），包括显示和外部操作 |
| 用户数量、访问频率     | 记录使用目标屏幕的人数和访问频率                             |
| 使用时机               | 记录使用目标屏幕的时机概述                                   |
| 屏幕上的显示量（条数） | 记录在列表屏幕上显示的数据条数                               |
| 滚动的有无             | 用O/×记录有无                                                |
| 分页的有无             | 用○/×记录有无                                                |
| 标签页的有无           | 用O/×记录有无                                                |
| 说明                   | 是否具有仅滚动列表显示区域以提高可读性的功能                 |
| 说明                   | 是否具有仅对列表显示区域显示固定条数的数据，并通过“前”、“后”等来在下一个屏幕上显示下一批数据的功能 |

###### 商品注册的情况

| #    | ID          | 名称             | 更新类型 | 主要数据 | 说明                   |
| ---- | ----------- | ---------------- | -------- | -------- | ---------------------- |
| 1    | S-PRO-001-1 | 商品注册画面     | 单一注册 | 商品     | 用于注册单一商品的画面 |
| 2    | S-PRO-001-2 | 商品注册确认画面 | 确认     | 商品     | 已注册商品的确认画面   |
| 3    | S-PRO-001-3 | 商品注册完成画面 | 完成     | 商品     | 注册完成画面           |



###### 5.画面项目设计

画面设计的最后一个设计元素是画面项目设计。在这里，将设计屏幕的布局、屏幕的各个项目、项目的格式检查，以及屏幕事件。

特别是，如何表达构成屏幕的元素是这个规格描述的关键。将屏幕的布局作为屏幕布局图来设计和描述，项目的细节和格式检查作为项目列表来设计和描述，以及屏幕事件作为事件列表来设计和描述。

###### i）屏幕布局图

在屏幕布局图中，使用表示屏幕布局的模拟屏幕图像或线框图来进行布局设计。

※1: 这是用于确认外观的屏幕。仅根据外观进行，不进行实际操作，多数情况下只实现屏幕转换。

 ※2: 这是一个表示屏幕的项目和布局的图，不包括设计和详细的布局。

###### ii）项目一览 

在项目一览中，将列举出目标屏幕是由哪些项目组成的。在典型的项目一览中，将定义以下内容的项目。

| 说明                                                         | 项目名        |
| ------------------------------------------------------------ | ------------- |
| 画面项目的序号                                               | #             |
| 表示画面项目的ID                                             | ID            |
| 描述项目名称                                                 | 项目名称      |
| 描述标签内容的项目标签。在程序级别，画面项目和标签是分开的，但在基本设计级别，将它们一起描述会更容易理解 | 标签          |
| 描述在屏幕上定义的组件类型                                   | 组件类型      |
| 描述项目是作为输入组件还是作为信息显示的输出                 | 输入/输出分类 |
| 描述项目是否有效。如果是条件性有效，则用O（有效）、△（条件性）、X（无效）表示，并在备注中描述条件 | 有效/无效     |
| 描述输入项目是否可以输入。如果是条件性输入，则用O（有效）、△（条件性）、X（无效）表示，并在备注中描述条件 | 输入可/不可   |
| 描述屏幕项目的类型（数字、字符串、货币、日期）。此类型是在屏幕上通用定义的 | 类型          |
| 描述项目值的位数（数字）、项目的字符数（字符串）。如果显示和输入的位数不同，则描述两者 | 位数          |
| 描述格式，例如数字的千位分隔符，日期的表示方法（YYYYMMDD），右对齐、左对齐的内容，或者屏幕上通用定义的内容，字符类型（半角/全角），输入范围等 | 格式          |
| 描述显示格式，字体、颜色等。可以定义屏幕上的通用模式，并描述该模式的名称 | 显示格式      |
| 如果在列表等中重复项目，则描述○                              | 重复          |
| 描述重复项目的层级关系。奇数用于表示级别。如果重复是嵌套的，例如列表中包含重复项目，则此级别将为1、3、5等 | 级别          |
| 描述重复显示项目的排序顺序。用数字描述排序优先级（从1开始按顺序编号）。如果有多个数字，那么按照数字较小的项目进行排序，如果目标项目相同，则按照下一个项目进行排序 | 排序顺序      |
| 描述是否进行必填检查。如果对输入项目进行必填检查，则描述○    | 必填检查      |
| 描述是否进行类型检查。如果对输入项目进行类型检查，则描述○    | 类型检查      |
| 描述是否进行位数检查。如果对输入项目进行位数检查，则描述○    | 位数检查      |
| 描述项目的说明                                               | 说明          |
| 描述没有条件时显示的内容。如果事件更改了值，则在事件设计的处理内容中使用此屏幕项目，并描述显示内容。如果输出项目需要计算，则描述计算逻辑（如果复杂，则在功能处理详细信息中描述逻辑，并引用该内容） | 初始显示      |
| 描述屏幕布局的编号（如果有的话），还有其他条件或补充说明     | 备注          |

会员注册画面项目的例子

| #    | ID          | 项目名称       | 标签     | 部件种类   | 输入/输出分类 |
| ---- | ----------- | -------------- | -------- | ---------- | ------------- |
| 1    | MEM-01-01   | name           | 姓名     | 文本框     | 输入          |
| 2    | MEM-01-02   | post_code      | 邮政编码 | 文本框     | 输入          |
| 3    | MEM-01-03-1 | address1       | 地址1    | 文本框     | 输入          |
| 4    | MEM-01-03-2 | address2       | 地址2    | 文本框     | 输入          |
| 5    | MEM-01-04   | tel_no         | 电话号码 | 文本框     | 输入          |
| 6    | MEM-01-05   | birth_date     | 出生日期 | 文本框     | 输入          |
| 7    | MEM-01-06   | mail           | 邮件地址 | 标签       | 输出          |
| 8    | MEM-01-07   | address_search | 地址搜索 | 按钮       | 动作          |
| 9    | MEM-01-08   | entry          | 登录     | 按钮       | 动作          |
| 10   | MEM-01-09   | cancel         | 取消     | 按钮       | 动作          |
| 11   | MEM-01-10   | id             | 无       | 非显示信息 | 输入          |

| #    | 有效/无效 | 输入可/不可 | 类型   | 位数 | 格式         | 显示格式      | 重复 |
| ---- | --------- | ----------- | ------ | ---- | ------------ | ------------- | ---- |
| 1    | 有效      | 可          | 字符串 | 20   | 全角半角混合 | 输入文字格式1 |      |
| 2    | 有效      | 可          | 数字   | 7    | 数字         | 输入文字格式1 |      |
| 3    | 有效      | 可          | 字符串 | 128  | 全角半角混合 | 输入文字格式1 |      |
| 4    | 有效      | 可          | 字符串 | 128  | 全角半角混合 | 输入文字格式1 |      |
| 5    | 有效      | 可          | 数字   | 11   | 数字         | 输入文字格式1 |      |
| 6    | 有效      | 可          | 数字   | 8    | YYYYMMDD     | 输入文字格式1 |      |
| 7    | 有效      | 可          | 字符串 | 256  | 邮件地址     | 输入文字格式1 |      |
| 8    | 有效      |             |        |      |              |               |      |
| 9    | 有效      |             |        |      |              |               |      |
| 10   | 有效      |             |        |      |              |               |      |

| #    | 说明                             | 初期表示               |
| ---- | -------------------------------- | ---------------------- |
| 1    | 会员的姓名                       | 空白                   |
| 2    | 会员的邮政编码                   | 空白                   |
| 3    | 会员的地址1（至市区町村）        | 空白                   |
| 4    | 会员的地址2（门牌号以后）        | 空白                   |
| 5    | 会员的电话号码                   | 空白                   |
| 6    | 会员的出生日期                   | 空白                   |
| 7    | 会员的电子邮件地址（已临时注册） | 临时注册的电子邮件地址 |
| 8    | 基于邮政编码搜索地址的操作       |                        |
| 9    | 将输入的信息注册为会员信息的操作 |                        |
| 10   | 清除输入的信息的操作             |                        |

###### 画面項目の例 （2）

| #    | ID       | 项目名称   | ラベル   | 部品種類 | 入出力区分 |
| ---- | -------- | ---------- | -------- | -------- | ---------- |
| 1    | MC-01-01 | list       | 一览     |          | 输出       |
| 2    | MC-01-02 | all_select |          | 复选框   | 输入       |
| 3    | MC-01-03 | select     |          | 复选框   | 输入       |
| 4    | MC-01-04 | id         | 会员ID   | 标签     | 输出       |
| 5    | MC-01-05 | name       | 氏名     | 标签     | 输出       |
| 6    | MC-01-06 | post_code  | 邮政编码 | 标签     | 输出       |
| 7    | MC-01-07 | address    | 地址     | 标签     | 输出       |
| 8    | MC-01-08 | tel_no     | 电话号码 | 标签     | 输出       |
| 9    | MC-01-09 | birth_date | 生年月日 | 标签     | 输出       |

| #    | 说明                                             |
| ---- | ------------------------------------------------ |
| 1    | 会员的框架列表显示。显示4个项目                  |
| 2    | 全选复选框的初期显示为非选中状态                 |
| 3    | 复选框的初期显示为非选中状态。它的值与会员ID相关 |
| 4    | 会员ID重复显示目标会员的ID                       |
| 5    | 姓名重复显示目标会员的姓名                       |
| 6    | 邮政编码重复显示目标会员的邮政编码               |
| 7    | 地址重复显示目标会员的地址1和地址2               |
| 8    | 电话号码重复显示目标会员的电话号码               |
| 9    | 生年月日重复显示目标会员的生年月日               |

###### iii）事件列表 

事件列表是一个列表，其中包含了用户在屏幕上对某个项目进行操作时系统将执行的所有事件。 它会列出屏幕项目和用户操作（例如点击、鼠标悬停等）作为一个项目

| 项目名   | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| #        | 描述连续的数字                                               |
| ID       | 描述事件的ID                                                 |
| 名称     | 描述事件的名称                                               |
| 项目ID   | 描述被操作的项目的ID（项目列表的项目ID）                     |
| 项目名   | 描述被操作的项目的名称（项目列表的名称）                     |
| 操作区分 | 描述操作内容的分类（例如：点击、双击、文字输入等）           |
| 处理区分 | 描述是在客户端（浏览器）内处理还是在服务器上进行处理，用内部/外部描述 |
| 画面遷移 | 描述处理时是否伴随画面转换，伴随时描述为○                    |
| 機能ID   | 如果需要服务器处理，描述将调用的功能的ID                     |
| 输入     | 描述事件处理时的输入信息，用项目ID、项目名称等描述会更清晰   |
| 输出     | 描述事件结束时的输出信息，用项目ID、项目名称等描述会更清晰   |
| 说明     | 描述处理的概要                                               |



###### 内部事件和外部事件 

事件处理有几种模式。 模式1简单的内部处理 作为简单的处理，有在客户端（浏览器）中进行的内部处理。 例如，有一个从日历中输入日期的辅助功能的处理（通常称为DatePicker）。这个处理通常是由JavaScript在浏览器内部处理的。如果描述这个处理模式的事件列表，它会是这样的（生日是用DatePicker输入的）。

| #    | ID        | 名称 | 项目ID    | 项目名 | 操作分类 | 处理分类 | 屏幕转换 |
| ---- | --------- | ---- | --------- | ------ | -------- | -------- | -------- |
| 1    | MEM-01-E1 | 生日 | MEM-01-05 | 生日   | 焦点     | 内部     | 无       |

| #    | 功能ID | 输入                             | 输出                                                       | 说明                                               |
| ---- | ------ | -------------------------------- | ---------------------------------------------------------- | -------------------------------------------------- |
| 1    | 无     | 输入到“生年月日”项目中的期望值   | 显示在“生年月日”项目中的日期（如果为空，则为1975年1月1日） | 将值传递给DatePicker，并根据设置的值显示DatePicker |
| 2    | 无     | 从DatePicker传递的值（设置的值） | 将值显示在“生年月日”项目中                                 | 无                                                 |



###### 简单的外部处理 

在简单的处理中，另一个例子是客户端（浏览器）向服务器发送请求，并在服务器上进行处理的外部处理模式。例如，可以提到会员批量更新功能中的编辑屏幕过渡处理。

| ＃   | ID       | 名称         | 项目ID   | 项目名 | 操作区分 | 处理区分 | 画面遷移             |
| ---- | -------- | ------------ | -------- | ------ | -------- | -------- | -------------------- |
| 1    | MC-01-E1 | 編集画面遷移 | MC-01-10 | 編集   | クリック | 外部     | 会员情報一括更新画面 |



| ＃   | 機能ID    | 入力                 | 出力                 | 說明                                                         |
| ---- | --------- | -------------------- | -------------------- | ------------------------------------------------------------ |
| 1    | FMC-01-01 | 会員IDが入力される。 | チェックボックスの値 | チェックされているチェックボックスの値は編集対象として選択された会員であり、会員IDの一覧を入力として、会員一括更新画面表示機能を呼び出す。 |



###### 内部处理和外部处理的组合处理 

这是一种将客户端（浏览器）内部处理和外部处理结合起来进行一项处理的模式。例如，可以举出基于输入的邮政编码部分搜索地址，并在地址（输入项）上显示的处理。

| #    | ID       | 名称     | 项目ID    | 项目名   | 操作区分 | 处理区分    |
| ---- | -------- | -------- | --------- | -------- | -------- | ----------- |
| 1    | MC-01-E2 | 住所检索 | MEM-01-06 | 住所检索 | 点击     | 外部 非同步 |

| #    | 说明                                                         | 输入          | 输出                                                         | 遷移 | 功能ID   |
| ---- | ------------------------------------------------------------ | ------------- | ------------------------------------------------------------ | ---- | -------- |
| 1    | MEM-01-02的值被获取，进行数字3位-数字4位的格式检查，如果检查OK，则异步调用FC-P-001。如果返回的值不是错误，并且不是空字符串，则将其作为MEM-01-03-1的值进行输出。如果是错误或空字符串，则什么都不做。如果检查错误，则在错误消息区域显示错误消息MSG-FC-P-E01。 | MEM-01-02的值 | 如果返回的值不是错误且不是空字符串，则输出MEM-01-03-1的值。如果是错误或空字符串，则不输出。 | 无   | FC-P-001 |

