# 18.应用程序的复杂性

###### 应用程序设计的定义 

应用程序设计是指考虑如何满足功能要求，并将这些要求分为输入、数据存储和输出。对于"想要做什么"=功能要求，将数据如何表示它放在中心，然后设计如何存储数据=(数据库设计)、如何输入数据（输入设计、协同设计），以及如何显示/输出数据（输出设计、协同设计）。 因为输入信息和输出信息之间通常存在差距，因此需要考虑以易于相互处理的方式存储数据，从而将输入数据转换为存储数据，以及将存储数据转换为输出数据，也成为本设计的目标。



应用程序设计的顺序是，首先整理功能的粒度，明确功能间的包含关系和相互关系。然后，明确该功能的输入/输出和数据存储（=规格）。然后，设计如何实现这些输入/输出、转换和数据存储（处理详细）。在设计处理细节时，需要考虑业务规则，比如检查前提条件是否满足、数据不一致或业务规则不一致时的处理等。 最后，为了易于操作，考虑如何输出日志和消息等，添加能轻松判断系统内部发生了什么的处理，从而完成所谓的应用程序设计。 需要在满足多个功能要求的同时，设计这些功能，以避免矛盾，即使单一功能的设计很容易，但考虑全局时可能会变得困难。



###### 単純なアプリケーションの構造イメージ

![単純なアプリケーションの構造イメージ](https://github.com/RNCloudService/higher-process/blob/main/%E4%B8%8A%E6%B5%81%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A12/picture/28.jpg)

###### 単純なアプリケーションの機能を分割した例

![単純なアプリケーションの機能を分割した例](https://github.com/RNCloudService/higher-process/blob/main/%E4%B8%8A%E6%B5%81%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A12/picture/29.jpg)



###### 理解功能的复杂性阶段 

功能的复杂性很难评估，因为需要考虑许多因素，因此应用程序设计和开发的工作量估算是困难的。在这里，通过功能分割来缩小功能的粒度，简化为“从输入功能获取信息并存储信息”或“从存储的信息中输出信息”这样的粒度，然后考虑复杂性是什么，将其分为四个阶段。

###### 第一阶段 

认为将输入信息原样存储，并搜索存储结果并显示的功能是第一阶段的复杂性。

 i）输入功能示例 假设的是几乎没有业务逻辑，只对输入项进行检查（验证），稍微进行一些转换（代码值→代码）等，然后存储到单个表中的级别。输入屏幕的模式可以是单个记录的详细输入或批量输入的列表编辑屏幕。批量更新可能会使逻辑变得复杂，但在这里假设简单的情况，将其归为第一阶段。

 ii）输出功能示例 假设将从搜索条件屏幕→列表屏幕→详细屏幕进行转换，将输入的信息原样显示或进行少量的转换（代码→代码值，多语言消息处理）等。 但是，由于屏幕、编程语言的信息结构和数据库之间的数据格式各不相同，会产生一些差距。因此，可能需要程序格式上的转换，但这是所有应用程序通用的，因此不作详细说明。例如，在Web应用程序中，需要处理发送的HTTP数据，程序接收后转换为程序的信息结构，处理该信息结构，然后转换为SQL，这是必要的。



###### 第二阶段 

假设输入信息将存储在多个表中。

 i）输入功能示例 在第一阶段，输入信息是原样存储的，但在第二阶段，从一个屏幕存储到多个表的功能是适用的级别。例如，称为“头细节模式”的数据结构是这个阶段的典型例子，常用于订单信息注册。在这个例子中，将分别存储订单信息和订单详细信息。

 ii）输出功能示例 假设需要从多个表中获取信息，或者需要进行汇总等计算逻辑。在这种情况下，复杂性会比第一阶段稍高一些。



###### 第三阶段 

我们考虑到输入信息的模式会影响处理过程。

 i）输入功能示例 在第二阶段，数据存储在多个表中，但处理是相同的。在第三阶段，假设处理将根据输入信息而变化。例如，考虑电子商务网站的处理。如果要购买的商品是库存商品和制造商直送商品，则订单注册后的物流指示处理将不同。在这种情况下，根据订单的商品，处理将不同。这可能是一个简单的例子，可能不会觉得复杂，但根据商品类型而变化的处理情况在电子商务网站和销售管理系统中很常见。此外，销售管理系统的价格决定逻辑通常很复杂，通常根据客户折扣、活动等组合确定最终价格，这种情况很常见。在这个例子中，我们将购买客户和活动信息视为上下文输入信息，并根据客户分类和商品确定处理（价格决定）将不同。将这种情况视为复杂性的第三阶段。在输出功能中很少有这个级别的复杂性，因此不会给出“输出功能示例”。



###### 第四阶段 

考虑到输入信息的模式和系统状态会影响处理。

 i）处理示例 如果存在在线批处理，可能需要确定是否在批处理执行期间并更改处理。在这种在线批处理的情况下，批处理对主数据的更新等应对未来日期的数据进行，并且聚合处理应在无法在线输入的时间段内进行，不应影响在线处理，但如果不是这样，可能存在业务规则，即在批处理执行期间无法进行在线处理。在这种情况下，当状态为“执行中”时，处理将与“非执行中”状态不同。可能需要设计判定机制和抑制执行、重新执行的机制。 此外，经常无法更新进行了结算处理的数据，这也需要判断表示结算处理后的状态并切换处理。这种处理也可以说是这个阶段的复杂度。由于在输出功能中很少有这个级别的复杂性，因此不会给出“输出功能示例”。