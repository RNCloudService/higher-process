# 8.在需求中处理的“状态”

整个系统将拥有的状态可以说是在设计中确定的，但是由业务决定的状态转换被视为对设计的输入。业务决定的状态转换的典型例子是“关闭”。从系统的角度来看，“关闭”是一个耗时的约束，但是如前所述，业务系统不可避免地会向某种形式的会计系统流动数据。当考虑到必要的会计“关闭”时，这可以说是完全自然的。

这是应在应用程序之间共享的信息。当一个应用程序改变“状态”时，另一个应用程序持有的功能的操作可能会改变。通常，这种情况是从业务角度定义的，但在设计时，需要从系统或应用程序的角度捕捉这种状态。

考虑到“关闭”，可以考虑日常、每周、每月、每季度和每年的关闭。虽然每日或每周的关闭较少，但每月的关闭相当常见。例如，可能有过因为忘记结算交通费用而被会计部门训斥，或者不被接受的经历。那就是“月度关闭”。由于交通费也是费用，所以它们是按月计算的，费用是按月确认的。当然，可能有时候可以在月度之外改变会计数字，但那是个例外。在这个意义上，可以说在明确关闭的时间后确定了数据确认政策。

![在需求中处理的状态](https://github.com/RNCloudService/higher-process/blob/main/%E4%B8%8A%E6%B5%81%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A12/picture/15.jpg)



系统状态转换中另一个重要的检查点是"在线批处理的存在"。在线批处理是指在进行在线（通常是同步处理，进行用户交互）处理的同时，进行批处理。

如果没有在线批处理，就会发生开闭局这种事件，会发生与前面的结算处理不同粒度的系统状态转换。进行开局处理后，就可以执行在线处理，开局期间不执行批处理。反过来，当闭局时，不执行在线功能，批处理开始执行。

这样做的目的是，即使批处理更新了所谓的"掩码"（mask）数据，也不会影响用户可能会参考的在线功能。相反，如果存在在线批处理，则需要采取某种方式来处理

![批处理](https://github.com/RNCloudService/higher-process/blob/main/%E4%B8%8A%E6%B5%81%E5%B7%A5%E7%A8%8B%E8%AE%BE%E8%AE%A12/picture/16.jpg)